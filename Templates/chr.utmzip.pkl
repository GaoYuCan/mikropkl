open module chr.utmzip
extends "../Pkl/utmzip.pkl"
import "../Pkl/CHR.pkl"

baseName = "chr.\(architecture).\(backend.toLowerCase()).\(chrVersion.version)"
name = baseName

cpus = 2
memory = 1.gib

imageDownloadUrl = chrVersion.downloadUrl
additionalDisks : List<DataSize> = List()

notes = """
\(name) 
Mikrotik RouterOS CHR for UTM's \(backend) Virtualization on \(architecture).  

Default username is 'admin', without password - please change when prompted.  

Speed is limited to 1Mb/s, but free forever.  
With trial or paid license, the speed limit can be changed.  
See https://help.mikrotik.com/docs for more information.
"""

logoSvg = new CHR.Icon {
    style = "solid"
}

chrVersion : CHR.RouterOSVersion = new CHR.RouterOSVersion { 
    name = read?("env:CHR_VERSION") ?? "stable"  
    arch = outer.architecture.replaceAll("x86_64","x86").replaceAll("aarch64","arm64")
}
